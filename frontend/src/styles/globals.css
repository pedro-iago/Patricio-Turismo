/* 1. DIRETIVAS DO TAILWIND */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* === CORREÇÃO IOS PWA (START) === */
/* TRAVA TOTAL: Impede que o navegador role a janela (o que faz as barras aparecerem) */
html, body, #root {
  height: 100%;
  width: 100%;
  overflow: hidden; /* O segredo: A janela principal NÃO rola */
  position: fixed;  /* Garante que fique travado na viewport */
  top: 0;
  left: 0;
  overscroll-behavior: none; /* Remove o efeito elástico (bouncing) */
  font-size: var(--font-size);
}

body {
  /* Fundo de segurança laranja para evitar flash branco */
  background-color: #F7931E; 

  /* Áreas seguras do iPhone (Notch e Barra inferior) */
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}
/* === CORREÇÃO IOS PWA (END) === */


/* 2. SEU TEMA (VARIÁVEIS, ETC) */
@custom-variant dark (&:is(.dark *));

:root {
  --font-size: 16px;
  --background: #fafafa;
  --foreground: oklch(0.145 0 0);
  --card: #ffffff;
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: #F7931E;
  --primary-foreground: #ffffff;
  --secondary: #f5f5f5;
  --secondary-foreground: #030213;
  --muted: #ececf0;
  --muted-foreground: #717182;
  
  /* Cor de seleção (item da lista) */
  --accent: #FFF5E6; 
  --accent-foreground: #030213;
  
  --destructive: #d4183d;
  --destructive-foreground: #ffffff;
  --border: rgba(0, 0, 0, 0.1);
  --input: transparent;
  --input-background: #ffffff;
  --switch-background: #cbced4;
  --font-weight-medium: 500;
  --font-weight-normal: 400;

  /* ✅ CORREÇÃO: Define a variável de cor do anel de foco */
  --ring: var(--primary); /* Define a cor base do anel */

  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --radius: 0.5rem;
  --sidebar: #ffffff;
  --sidebar-foreground: #1f2937;
  --sidebar-primary: #F7931E;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: #FFF5E6;
  --sidebar-accent-foreground: #1f2937;
  --sidebar-border: #e5e7eb;
  --sidebar-ring: #F7931E;
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.145 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.145 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.985 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.396 0.141 25.723);
  --destructive-foreground: oklch(0.637 0.237 25.331);
  --border: oklch(0.269 0 0);
  --input: oklch(0.269 0 0);

  /* ✅ CORREÇÃO: Define a variável de cor do anel de foco */
  --ring: var(--primary); 

  --font-weight-medium: 500;
  --font-weight-normal: 400;
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(0.269 0 0);
  --sidebar-ring: oklch(0.439 0 0);
}

@theme inline {
  /* ... (todo o seu bloco @theme) ... */
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  /* ... (seus blocos @layer base) ... */
  :where(:not(:has([class*=" text-"]), :not(:has([class^="text-"])))) {
    /* ... (suas regras de tipografia) ... */
    input {
      font-size: var(--text-base);
      font-weight: var(--font-weight-normal);
      line-height: 1.5;
    }
  }
  
  /* ✅ CORREÇÃO: Define a cor do anel do Tailwind */
  * {
    --tw-ring-color: var(--ring);
  }
}

/* --- 3. BLOCO DE IMPRESSÃO (COM NOMES pt-) --- */

/* REGRAS DE TELA: Esconde o que é só para impressão */
.pt-print-only {
  display: none;
}
.pt-print-title {
  display: none;
}

/* REGRAS DE IMPRESSÃO: O que acontece ao clicar em "Imprimir" */
@media print {
  /* Evita que uma linha da tabela seja cortada ao meio na virada de página */
  tr {
    break-inside: avoid;
    page-break-inside: avoid; /* Para maior compatibilidade com navegadores */
  }
  
  /* Opcional: Garante que a tabela em si também tente não quebrar */
  table {
    break-inside: auto;
  }
  
  /* 1. Esconde o layout e tudo com a classe .pt-no-print */
  aside, header, .pt-no-print, [role="tablist"] {
    display: none !important;
  }
  
  /* 2. Mostra o que é só para impressão */
  .pt-print-only {
    display: block !important;
  }

  /* 3. Reseta o layout do body/main para impressão */
  body, #root, .flex, .flex-1, [class*="flex-1"], main, .pt-print-container {
    display: block !important;
    width: 100% !important;
    height: auto !important;
    overflow: visible !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* 4. Limpa cards e sombras */
  .pt-print-clean, [class*="shadow-"] {
    border: none !important;
    box-shadow: none !important;
  }
  
  /* 5. Estilos da Tabela (fonte geral de 9px) */
  table {
    width: 100% !important;
    table-layout: fixed !important;
    font-size: 9px !important; /* <-- Fonte reduzida para a tabela */
    page-break-inside: auto !important; 
  }
  tr {
    page-break-inside: avoid !important; 
  }
  
  /* 6. Quebra de linha em células */
  th, td {
    padding: 2px 4px !important; /* Reduz o padding */
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    word-break: break-word !important; /* Quebra palavras longas */
    white-space: normal !important;
  }
  td > div {
     word-break: break-word !important;
     overflow-wrap: break-word !important;
     white-space: normal !important;
  }
  
  /* 7. Largura das Colunas (AJUSTADAS PARA 7 COLUNAS) */
  .pt-print-col-passageiro { width: 18% !important; } 
  .pt-print-col-endereco   { width: 25% !important; }
  .pt-print-col-afiliado   { width: 16% !important; }
  .pt-print-col-valor      { width: 10% !important; }
  .pt-print-col-status     { width: 8% !important; }
  .pt-print-col-assento    { width: 8% !important; }  /* <-- NOVA CLASSE */
  .pt-print-col-bagagem    { width: 8% !important; }
  
  /* (Classes de encomenda mantidas) */
  .pt-print-col-descricao  { width: 22% !important; }
  .pt-print-col-remetente  { width: 30% !important; }
  
  /* 8. Títulos do Relatório */
  .pt-print-title {
    display: block !important;
    margin-top: 1rem; /* Reduzido */
    font-size: 1.1rem; /* Reduzido */
    font-weight: 600;
    page-break-after: avoid; 
  }

  /* 9. Reduz a fonte de colunas específicas (Opcional, mas mantido) */
  table th:nth-child(2),
  table td:nth-child(2),
  table th:nth-child(5),
  table td:nth-child(5) {
    font-size: 8px !important; /* Mais pequeno que os 9px do resto da tabela */
  }
}